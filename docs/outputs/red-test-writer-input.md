# RED Test Writer Input - Cycle 4

> **메타데이터**
> - Cycle: 4/10
> - Feature: generateRecurringInstances 함수
> - Agent: tdd-orchestrator → red-test-writer
> - Timestamp: 2025-10-31T10:45:00Z

## 작업 지시

다음 함수에 대한 **의도적으로 실패하는 테스트**를 작성하세요.

### 구현 대상 함수

```typescript
function generateRecurringInstances(
  eventForm: EventForm,
  endDate: string
): Omit<Event, 'id'>[]
```

### 함수 목적

반복 일정의 모든 인스턴스를 생성합니다.

### 입력
- `eventForm: EventForm` - 사용자 입력 (date, repeat.type, repeat.interval 포함)
- `endDate: string` - 반복 종료 날짜 (YYYY-MM-DD, 최대 2025-12-31)

### 출력
- `Omit<Event, 'id'>[]` - 개별 이벤트 배열 (id 제외)

### 로직 명세

1. `baseDate` 파싱 (eventForm.date)
2. 첫 이벤트 무조건 추가
3. while 루프:
   - `getNextOccurrence`로 다음 날짜 계산
   - 종료일 초과 시 break
   - `shouldSkipDate`로 건너뛰기 체크
   - 유효하면 instances에 추가
4. instances 반환

### 테스트 시나리오 (spec-analyzer-output.md 기반)

1. **매일 반복 (3일)**
   - 입력: 2025-01-01, 매일 간격 1, 종료 2025-01-03
   - 출력: [2025-01-01, 2025-01-02, 2025-01-03] (3개)

2. **매일 반복 (10일)**
   - 입력: 2025-01-01, 매일 간격 1, 종료 2025-01-10
   - 출력: 1/1 ~ 1/10 (10개)

3. **매주 반복 (월요일)**
   - 입력: 2025-01-06(월), 매주 간격 1, 종료 2025-01-31
   - 출력: [1/6, 1/13, 1/20, 1/27] (4개, 모두 월요일)

4. **매월 반복 (15일)**
   - 입력: 2025-01-15, 매월 간격 1, 종료 2025-05-31
   - 출력: [1/15, 2/15, 3/15, 4/15, 5/15] (5개)

5. **매월 31일 반복 (건너뛰기)**
   - 입력: 2025-01-31, 매월 간격 1, 종료 2025-05-31
   - 출력: [1/31, 3/31, 5/31] (3개, 2월/4월 건너뜀)

6. **매년 반복**
   - 입력: 2025-01-15, 매년 간격 1, 종료 2025-12-31
   - 출력: [2025-01-15] (1개, 같은 해라서)

7. **반복 간격 2 (매일)**
   - 입력: 2025-01-01, 매일 간격 2, 종료 2025-01-10
   - 출력: [1/1, 1/3, 1/5, 1/7, 1/9] (5개)

8. **반복 간격 2 (매주)**
   - 입력: 2025-01-06(월), 매주 간격 2, 종료 2025-03-31
   - 출력: [1/6, 1/20, 2/3, 2/17, 3/3, 3/17, 3/31] (7개)

9. **첫 이벤트만 (종료일 = 시작일)**
   - 입력: 2025-12-31, 매일 간격 1, 종료 2025-12-31
   - 출력: [12/31] (1개)

10. **반복 유형 'none'**
    - 입력: 2025-01-01, none
    - 출력: [2025-01-01] (1개)

### 파일 위치

- 테스트 파일: `src/__tests__/unit/easy.repeatUtils.spec.ts`
- 구현 파일: `src/utils/repeatUtils.ts` (아직 함수 미구현)

### 요구사항

- ✅ 테스트는 Assertion 기반 실패여야 함 (미구현으로 인한)
- ✅ Baseline(142) 대비 실패 수 +10 이상 증가
- ✅ 모든 시나리오를 단일 describe 블록에 작성
- ✅ 의존성 함수: `getNextOccurrence`, `shouldSkipDate`, `formatDate` (모두 구현됨)

### 베이스라인

- 현재 통과 테스트: 142개
- 현재 실패 테스트: 0개
